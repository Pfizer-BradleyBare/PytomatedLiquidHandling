from __future__ import annotations

from pydantic import dataclasses

from ..layout import LayoutSorting, NumericLayout
from ..pipettable_labware import CalibrationPoint, PipettableLabware


@dataclasses.dataclass(kw_only=True, eq=False)
class Hamilton1500uLFliptubeCarrier(PipettableLabware):
    def __init__(
        self: Hamilton1500uLFliptubeCarrier,
        identifier: str = "Hamilton1500uLFliptubeCarrier",
    ):
        super().__init__(
            identifier=identifier,
            x_length=0,
            y_length=0,
            z_length=0,
            transport_open_offset=0,
            transport_close_offset=0,
            transport_top_offset=0,
            transport_bottom_offset=0,
            layout=NumericLayout(
                rows=32,
                columns=1,
                direction=LayoutSorting.Columnwise,
            ),
            positions_per_well=1,
            max_volume=1500,
            dead_volume=10,
            calibration_curve=_create_cal_curve(),
        )


def _create_cal_curve() -> list[CalibrationPoint]:
    vols = [
        20,
        40,
        60,
        80,
        100,
        120,
        140,
        160,
        180,
        200,
        220,
        240,
        260,
        280,
        300,
        320,
        340,
        360,
        380,
        400,
        420,
        440,
        460,
        480,
        500,
        520,
        540,
        560,
        580,
        600,
        620,
        640,
        660,
        680,
        700,
        720,
        740,
        760,
        780,
        800,
        820,
        840,
        860,
        880,
        900,
        920,
        940,
        960,
        980,
        1000,
        1020,
        1040,
        1060,
        1080,
        1100,
        1120,
        1140,
        1160,
        1180,
        1200,
        1220,
        1240,
        1260,
        1280,
        1300,
        1320,
        1340,
        1360,
        1380,
        1400,
        1420,
        1440,
        1460,
        1480,
        1500,
        1520,
        1540,
        1560,
        1580,
        1600,
        1620,
        1640,
        1660,
        1680,
        1700,
        1720,
        1740,
        1760,
        1780,
        1800,
    ]
    heights = [
        1.2,
        2.7,
        3.8,
        4.5,
        5.9,
        6.8,
        7.4,
        8.2,
        8.9,
        9.5,
        10.0,
        10.6,
        11.0,
        11.4,
        12.2,
        12.6,
        13.1,
        13.6,
        14.1,
        14.5,
        14.8,
        15.3,
        15.6,
        15.8,
        16.4,
        16.7,
        16.9,
        17.3,
        17.7,
        18.1,
        18.2,
        18.5,
        19.0,
        19.2,
        19.6,
        20.0,
        20.2,
        20.7,
        20.9,
        21.3,
        21.5,
        21.8,
        22.2,
        22.4,
        22.9,
        23.2,
        23.5,
        24.0,
        24.3,
        24.7,
        24.9,
        25.3,
        25.5,
        25.8,
        26.3,
        26.6,
        26.9,
        27.2,
        27.4,
        27.9,
        28.1,
        28.3,
        28.7,
        28.9,
        29.4,
        29.6,
        29.9,
        30.2,
        30.5,
        30.9,
        31.2,
        31.4,
        31.7,
        31.9,
        32.5,
        32.8,
        32.9,
        33.3,
        33.5,
        33.9,
        34.1,
        34.5,
        34.7,
        34.9,
        35.4,
        35.7,
        35.8,
        36.3,
        36.5,
        36.9,
    ]

    return [
        CalibrationPoint(volume=vol, height=height)
        for vol, height in zip(vols, heights)
    ]
